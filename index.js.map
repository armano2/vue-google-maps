{"version":3,"file":"index.js","sources":["src/manager.js","src/utils/eventsBinder.js","src/utils/propsBinder.js","src/utils/getPropsValuesMixin.js","src/utils/deferredReady.js","src/components/mapElementMixin.js","src/components/marker.js","src/components/polyline.js","src/components/polygon.js","src/components/circle.js","src/components/rectangle.js","src/components/infoWindow.vue","src/utils/mountableMixin.js","src/components/map.vue","src/utils/simulateArrowDown.js","src/components/placeInput.vue","src/components/autocomplete.vue","src/main.js"],"sourcesContent":["var setUp = false;\n\nexport const loaded = new Promise((resolve, reject) => { // eslint-disable-line no-unused-vars\n  if (typeof window === 'undefined') {\n    // Do nothing if run from server-side\n    return;\n  }\n  window['vueGoogleMapsInit'] = resolve;\n});\n\n/**\n * @param apiKey    API Key, or object with the URL parameters. For example\n *                  to use Google Maps Premium API, pass\n *                    `{ client: <YOUR-CLIENT-ID> }`.\n *                  You may pass the libraries and/or version (as `v`) parameter into\n *                  this parameter and skip the next two parameters\n * @param version   Google for Maps version\n * @param libraries Libraries to load (@see\n *                  https://developers.google.com/maps/documentation/javascript/libraries)\n * @param loadCn    Boolean. If set to true, the map will be loaded form goole maps China\n *                  (@see https://developers.google.com/maps/documentation/javascript/basics#GoogleMapsChina)\n *\n * Example:\n * ```\n *      import {load} from 'vue-google-maps'\n *\n *      load(<YOUR-API-KEY>)\n *\n *      load({\n *              key: <YOUR-API-KEY>,\n *      })\n *\n *      load({\n *              client: <YOUR-CLIENT-ID>,\n *              channel: <YOUR CHANNEL>\n *      })\n * ```\n */\nexport const load = (apiKey, version, libraries, loadCn) => {\n  if (typeof document === 'undefined') {\n    // Do nothing if run from server-side\n    return;\n  }\n  if (!setUp) {\n    const googleMapScript = document.createElement('SCRIPT');\n\n    // Allow apiKey to be an object.\n    // This is to support more esoteric means of loading Google Maps,\n    // such as Google for business\n    // https://developers.google.com/maps/documentation/javascript/get-api-key#premium-auth\n    var options = {};\n    if (typeof apiKey == 'string') {\n      options.key = apiKey;\n    }\n    else if (typeof apiKey == 'object') {\n      for (let k in apiKey) { // transfer values in apiKey to options\n        options[k] = apiKey[k];\n      }\n    }\n    else {\n      throw new Error('apiKey should either be a string or an object');\n    }\n\n    // libraries\n    let librariesPath = '';\n    if (libraries && libraries.length > 0) {\n      librariesPath = libraries.join(',');\n      options['libraries'] = librariesPath;\n    }\n    else if (Array.prototype.isPrototypeOf(options.libraries)) {\n      options.libraries = options.libraries.join(',');\n    }\n    options['callback'] = 'vueGoogleMapsInit';\n\n    let baseUrl = 'https://maps.googleapis.com/';\n\n    if (typeof loadCn == 'boolean' && loadCn === true) {\n      baseUrl = 'http://maps.google.cn/';\n    }\n\n    let url = baseUrl + 'maps/api/js?' +\n      Object.keys(options)\n        .map((key) => encodeURIComponent(key) + '=' + encodeURIComponent(options[key]))\n        .join('&');\n\n    if (version) {\n      url = url + '&v=' + version;\n    }\n\n    googleMapScript.setAttribute('src', url);\n    googleMapScript.setAttribute('async', '');\n    googleMapScript.setAttribute('defer', '');\n    document.body.appendChild(googleMapScript);\n  } else {\n    throw new Error('You already started the loading of google maps');\n  }\n};\n","\n\nimport {forEach} from 'lodash';\n\nexport default (vueElement, googleMapObject, events) => {\n  forEach(events, (eventName) => {\n    const exposedName = eventName;\n    googleMapObject.addListener(eventName, (ev) => {\n      if (vueElement.$listeners && vueElement.$listeners[eventName]) {\n        vueElement.$emit(exposedName, ev);\n      }\n    });\n  });\n};\n","import {forEach} from 'lodash';\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport default (vueElement, googleMapsElement, props, options) => {\n  options = options || {};\n  var {afterModelChanged} = options;\n  forEach(props, ({twoWay, type, trackProperties}, attribute) => {\n    const setMethodName = 'set' + capitalizeFirstLetter(attribute);\n    const getMethodName = 'get' + capitalizeFirstLetter(attribute);\n    const eventName = attribute.toLowerCase() + '_changed';\n    const initialValue = vueElement[attribute];\n\n    if(typeof googleMapsElement[setMethodName] === 'undefined'){\n      throw new Error(`${setMethodName} is not a method of (the Maps object corresponding to) ${vueElement.$options._componentTag}`);\n    }\n\n    // We need to avoid an endless\n    // propChanged -> event emitted -> propChanged -> event emitted loop\n    // although this may really be the user's responsibility\n    var timesSet = 0;\n    if (type !== Object || !trackProperties) {\n      // Track the object deeply\n      vueElement.$watch(attribute, () => {\n        const attributeValue = vueElement[attribute];\n\n        timesSet++;\n        googleMapsElement[setMethodName](attributeValue);\n        if (afterModelChanged) {\n          afterModelChanged(attribute, attributeValue);\n        }\n      }, {\n        immediate: typeof initialValue !== 'undefined',\n        deep: type === Object\n      });\n    } else if (type === Object && trackProperties) {\n      // I can watch multiple properties, but the danger is that each of\n      // them triggers the event handler multiple times\n      // This ensures that the event handler will only be fired once\n      let tick = 0, expectedTick = 0;\n\n      const raiseExpectation = () => {\n        expectedTick += 1;\n      };\n\n      const updateTick = () => {\n        tick = Math.max(expectedTick, tick + 1);\n      };\n\n      const respondToChange = () => {\n        if (tick < expectedTick) {\n          googleMapsElement[setMethodName](vueElement[attribute]);\n\n          if (afterModelChanged) {\n            afterModelChanged(attribute, attributeValue);\n          }\n\n          updateTick();\n        }\n      };\n\n      trackProperties.forEach(propName => {\n        // When any props change -- assume they change on the same tick\n        vueElement.$watch(`${attribute}.${propName}`, () => {\n          raiseExpectation();\n          vueElement.$nextTick(respondToChange);\n        }, {\n          immediate: typeof initialValue !== 'undefined',\n        });\n      });\n    }\n\n    if (twoWay) {\n      googleMapsElement.addListener(eventName, (ev) => { // eslint-disable-line no-unused-vars\n        /* Check for type === Object because we're quite happy\n          when primitive types change -- the change detection is cheap\n        */\n        if (type === Object && timesSet > 0) {\n          timesSet --;\n          return;\n        }\n        else {\n          vueElement.$emit(eventName, googleMapsElement[getMethodName]());\n        }\n      });\n    }\n  });\n};\n","import {mapValues} from 'lodash';\n\nexport default {\n  methods: {\n    getPropsValues () {\n      return mapValues(this.$options.props, (v, k) => this[k]);\n    }\n  }\n};\n","/**\n * 1. Create a DeferredReady plugin.\n *\n * a. Updates options.configMergeStrategies to handle our new hook correctly (using Promise.all!)\n *\n * 2. VueGoogleMaps uses a DeferredReady mixin.\n *\n *     a. Each component checks for ancestors that are also DeferredReady (via dispatch/emit)\n *     b. If no, then run DeferredReady after ready.\n *     c. If yes, then run DeferredReady after parent's deferredReady.\n *\n *\n * Say we have the following inheritance:\n *\n * --> == 'child of'\n *\n * A --> B --> C\n *\n * ready is called in the following order:\n *\n * A.ready, B.ready, C.ready\n *\n * C.ready -- no further ancestors supporting mixin, so in ready() we run+\n *\n   **/\n\nexport var DeferredReady = {\n  install(Vue, options) { // eslint-disable-line no-unused-vars\n    // Use the same merge strategy as regular hooks\n    Vue.config.optionMergeStrategies.deferredReady = Vue.config.optionMergeStrategies.created;\n    Vue.config.optionMergeStrategies.beforeDeferredReady = Vue.config.optionMergeStrategies.beforeDeferredReady;\n  },\n};\n\nfunction runHooks(vm) {\n  var hooks = vm.$options.deferredReady || [];\n\n  // Run the beforeDeferredReady methods first\n  var beforePromise = vm.beforeDeferredReady ?\n    ((typeof vm.beforeDeferredReady.then === 'function') ?\n      vm.beforeDeferredReady : Promise.all(vm.beforeDeferredReady))\n      : Promise.resolve(null);\n\n  beforePromise.then(() => {\n    if (typeof hooks === 'function') {\n      hooks = [hooks];\n    }\n    return Promise.all(hooks.map(x => {\n      try {\n        return x.apply(vm);\n      } catch (err) {\n        console.error(err.stack);  // eslint-disable-line no-console\n      }\n    }));\n    // execute all handlers, expecting them to return promises\n    // wait for the promises to complete, before allowing child to execute\n  })\n  .then(() => {\n    vm.$deferredReadyPromiseResolve();\n  });\n}\n\nexport var DeferredReadyMixin = {\n  /* Resolved after the deferredReady has been called\n    and the (optional) promise it returns has been\n    resolved */\n  $deferredReadyPromise: false,\n  $deferredReadyPromiseResolve: false,\n  $deferredReadyAncestor: false,\n\n  created() {\n    this.$deferredReadyPromise = new Promise((resolve, reject) => { // eslint-disable-line no-unused-vars\n      this.$deferredReadyPromiseResolve = resolve;\n    });\n\n    let search = this.$parent;\n    while (search) {\n      if (search.$deferredReadyPromise) {\n        this.$deferredReadyAncestor = search;\n        break;\n      }\n      search = search.$parent;\n    }\n  },\n\n  mounted() {\n    // Execute the hooks only if this is the first\n    // ancestor that is a DeferredReady\n    // this.$deferredReadyMountedPromiseResolve();\n\n    if (!this.$deferredReadyAncestor) {\n      runHooks(this);\n    } else {\n      this.$deferredReadyAncestor.$deferredReadyPromise\n      .then(() => {\n        runHooks(this);\n      });\n    }\n  },\n};\n","import {DeferredReadyMixin} from '../utils/deferredReady';\n\n/**\n * @class MapElementMixin @mixins DeferredReadyMixin\n *\n * Extends components to include the following fields:\n *\n * @property $map        The Google map (valid only after the promise returns)\n *\n *\n * */\nexport default {\n\n  mixins: [DeferredReadyMixin],\n\n  created() {\n    /* Search for the Map component in the parent */\n    let search = this.$findAncestor(\n      ans => ans.$mapCreated\n    );\n\n    if (!search) {\n      throw new Error(`${this.constructor.name} component must be used within a <Map>`);\n    }\n\n    this.$mapPromise = search.$mapCreated.then((map) => {\n      this.$map = map;\n    });\n    // FIXME: This is a hack to ensure correct loading\n    // when the map has already be instantiated.\n    if (search.$mapObject) {\n      this.$map = search.$mapObject;\n    }\n    this.$MapElementMixin = search;\n    this.$map = null;\n  },\n\n  beforeDeferredReady () {\n    return this.$mapPromise;\n  },\n\n  methods: {\n    $findAncestor(condition) {\n      let search = this.$parent;\n\n      while (search) {\n        if (condition(search)) {\n          return search;\n        }\n        search = search.$parent;\n      }\n      return null;\n    }\n  }\n\n};\n","import {mapValues} from 'lodash';\r\nimport eventsBinder from '../utils/eventsBinder.js';\r\nimport propsBinder from '../utils/propsBinder.js';\r\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\r\nimport MapElementMixin from './mapElementMixin';\r\n\r\nconst props = {\r\n  animation: {\r\n    twoWay: true,\r\n    type: Number\r\n  },\r\n  attribution: {\r\n    type: Object,\r\n  },\r\n  clickable: {\r\n    type: Boolean,\r\n    twoWay: true,\r\n    default: true\r\n  },\r\n  cursor: {\r\n    type: String,\r\n    twoWay: true\r\n  },\r\n  draggable: {\r\n    type: Boolean,\r\n    twoWay: true,\r\n    default: false\r\n  },\r\n  icon: {\r\n    twoWay: true\r\n  },\r\n  label: {\r\n  },\r\n  opacity: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  options: {\r\n    type: Object\r\n  },\r\n  place: {\r\n    type: Object\r\n  },\r\n  position: {\r\n    type: Object,\r\n    twoWay: true,\r\n  },\r\n  shape: {\r\n    type: Object,\r\n    twoWay: true\r\n  },\r\n  title: {\r\n    type: String,\r\n    twoWay: true\r\n  },\r\n  zIndex: {\r\n    type: Number,\r\n    twoWay: true\r\n  },\r\n  visible: {\r\n    twoWay: true,\r\n    default: true,\r\n  },\r\n};\r\n\r\nconst events = [\r\n  'click',\r\n  'rightclick',\r\n  'dblclick',\r\n  'drag',\r\n  'dragstart',\r\n  'dragend',\r\n  'mouseup',\r\n  'mousedown',\r\n  'mouseover',\r\n  'mouseout'\r\n];\r\n\r\n/**\r\n * @class Marker\r\n *\r\n * Marker class with extra support for\r\n *\r\n * - Embedded info windows\r\n * - Clustered markers\r\n *\r\n * Support for clustered markers is for backward-compatability\r\n * reasons. Otherwise we should use a cluster-marker mixin or\r\n * subclass.\r\n */\r\nexport default {\r\n  mixins: [MapElementMixin, getPropsValuesMixin],\r\n  props: props,\r\n\r\n  render(h) {\r\n    if (!this.$slots.default || this.$slots.default.length == 0) {\r\n      return '';\r\n    } else if (this.$slots.default.length == 1) { // So that infowindows can have a marker parent\r\n      return this.$slots.default[0];\r\n    } else {\r\n      return h(\r\n        'div',\r\n        this.$slots.default\r\n      );\r\n    }\r\n  },\r\n\r\n  destroyed() {\r\n    if (!this.$markerObject)\r\n      return;\r\n\r\n    if (this.$clusterObject) {\r\n      this.$clusterObject.removeMarker(this.$markerObject);\r\n    }\r\n    else {\r\n      this.$markerObject.setMap(null);\r\n    }\r\n  },\r\n\r\n  deferredReady() {\r\n    const options = mapValues(props, (value, prop) => this[prop]);\r\n    options.map = this.$map;\r\n    delete options.options;\r\n    Object.assign(options, this.options);\r\n\r\n    // search ancestors for cluster object\r\n    let search = this.$findAncestor(\r\n      ans => ans.$clusterObject\r\n    );\r\n\r\n    this.$clusterObject = search ? search.$clusterObject : null;\r\n    this.createMarker(options);\r\n  },\r\n\r\n  methods: {\r\n    createMarker (options) {\r\n      this.$markerObject = new google.maps.Marker(options);\r\n      propsBinder(this, this.$markerObject, props);\r\n      eventsBinder(this, this.$markerObject, events);\r\n\r\n      if (this.$clusterObject) {\r\n        this.$clusterObject.addMarker(this.$markerObject);\r\n      }\r\n    }\r\n  },\r\n};\r\n","import {omit, clone} from 'lodash'\r\n\r\nimport eventBinder from '../utils/eventsBinder.js';\r\nimport propsBinder from '../utils/propsBinder.js';\r\nimport MapElementMixin from './mapElementMixin';\r\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\r\n\r\nconst props = {\r\n  draggable: {\r\n    type: Boolean\r\n  },\r\n  editable: {\r\n    type: Boolean,\r\n  },\r\n  options: {\r\n    twoWay: false,\r\n    type: Object\r\n  },\r\n  path: {\r\n    type: Array,\r\n    twoWay: true\r\n  },\r\n  deepWatch: {\r\n    type: Boolean,\r\n    default: false,\r\n  }\r\n};\r\n\r\nconst events = [\r\n  'click',\r\n  'dblclick',\r\n  'drag',\r\n  'dragend',\r\n  'dragstart',\r\n  'mousedown',\r\n  'mousemove',\r\n  'mouseout',\r\n  'mouseover',\r\n  'mouseup',\r\n  'rightclick'\r\n];\r\n\r\nexport default {\r\n  mixins: [MapElementMixin, getPropsValuesMixin],\r\n  props: props,\r\n\r\n  render() { return ''; },\r\n\r\n  destroyed () {\r\n    if (this.$polylineObject) {\r\n      this.$polylineObject.setMap(null);\r\n    }\r\n  },\r\n\r\n  deferredReady() {\r\n    const options = clone(this.getPropsValues());\r\n    delete options.options;\r\n    Object.assign(options, this.options);\r\n    this.$polylineObject = new google.maps.Polyline(options);\r\n    this.$polylineObject.setMap(this.$map);\r\n\r\n    propsBinder(this, this.$polylineObject, omit(props, ['deepWatch', 'path']));\r\n    eventBinder(this, this.$polylineObject, events);\r\n\r\n    var clearEvents = () => {};\r\n\r\n    this.$watch('path', (path) => {\r\n      if (path) {\r\n        clearEvents();\r\n\r\n        this.$polylineObject.setPath(path);\r\n\r\n        const mvcPath = this.$polylineObject.getPath();\r\n        const eventListeners = [];\r\n\r\n        const updatePaths = () => {\r\n          this.$emit('path_changed', this.$polylineObject.getPath());\r\n        };\r\n\r\n        eventListeners.push([mvcPath, mvcPath.addListener('insert_at', updatePaths)]);\r\n        eventListeners.push([mvcPath, mvcPath.addListener('remove_at', updatePaths)]);\r\n        eventListeners.push([mvcPath, mvcPath.addListener('set_at', updatePaths)]);\r\n\r\n        clearEvents = () => {\r\n          eventListeners.map(([obj, listenerHandle]) => // eslint-disable-line no-unused-vars\r\n            google.maps.event.removeListener(listenerHandle));\r\n        };\r\n      }\r\n    }, {\r\n      deep: this.deepWatch\r\n    });\r\n\r\n    // Display the map\r\n    this.$polylineObject.setMap(this.$map);\r\n  },\r\n};\r\n","import {omit, clone} from 'lodash';\n\nimport eventBinder from '../utils/eventsBinder.js';\nimport propsBinder from '../utils/propsBinder.js';\nimport MapElementMixin from './mapElementMixin';\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\n\nconst props = {\n  draggable: {\n    type: Boolean\n  },\n  editable: {\n    type: Boolean,\n  },\n  options: {\n    type: Object\n  },\n  path: {\n    type: Array,\n    twoWay: true\n  },\n  paths: {\n    type: Array,\n    twoWay: true\n  },\n  deepWatch: {\n    type: Boolean,\n    default: false\n  }\n};\n\nconst events = [\n  'click',\n  'dblclick',\n  'drag',\n  'dragend',\n  'dragstart',\n  'mousedown',\n  'mousemove',\n  'mouseout',\n  'mouseover',\n  'mouseup',\n  'rightclick'\n];\n\nexport default {\n  mixins: [MapElementMixin, getPropsValuesMixin],\n  props: props,\n\n  render() { return ''; },\n\n  destroyed () {\n    if (this.$polygonObject) {\n      this.$polygonObject.setMap(null);\n    }\n  },\n\n  deferredReady() {\n    const options = clone(this.getPropsValues());\n    delete options.options;\n    Object.assign(options, this.options);\n    if (!options.path) {\n      delete options.path;\n    }\n    if (!options.paths) {\n      delete options.paths;\n    }\n    this.$polygonObject = new google.maps.Polygon(options);\n\n    propsBinder(this, this.$polygonObject, omit(props, ['path', 'paths', 'deepWatch']));\n    eventBinder(this, this.$polygonObject, events);\n\n    var clearEvents = () => {};\n\n    // Watch paths, on our own, because we do not want to set either when it is\n    // empty\n    this.$watch('paths', (paths) => {\n      if (paths) {\n        clearEvents();\n\n        this.$polygonObject.setPaths(paths);\n\n        const updatePaths = () => {\n          this.$emit('paths_changed', this.$polygonObject.getPaths());\n        };\n        const eventListeners = [];\n\n        const mvcArray = this.$polygonObject.getPaths();\n        for (let i=0; i<mvcArray.getLength(); i++) {\n          let mvcPath = mvcArray.getAt(i);\n          eventListeners.push([mvcPath, mvcPath.addListener('insert_at', updatePaths)]);\n          eventListeners.push([mvcPath, mvcPath.addListener('remove_at', updatePaths)]);\n          eventListeners.push([mvcPath, mvcPath.addListener('set_at', updatePaths)]);\n        }\n        eventListeners.push([mvcArray, mvcArray.addListener('insert_at', updatePaths)]);\n        eventListeners.push([mvcArray, mvcArray.addListener('remove_at', updatePaths)]);\n        eventListeners.push([mvcArray, mvcArray.addListener('set_at', updatePaths)]);\n\n        clearEvents = () => {\n          eventListeners.map(([obj, listenerHandle]) => // eslint-disable-line no-unused-vars\n            google.maps.event.removeListener(listenerHandle));\n        };\n      }\n    }, {\n      deep: this.deepWatch,\n      immediate: true,\n    });\n\n    this.$watch('path', (path) => {\n      if (path) {\n        clearEvents();\n\n        this.$polygonObject.setPaths(path);\n\n        const mvcPath = this.$polygonObject.getPath();\n        const eventListeners = [];\n\n        const updatePaths = () => {\n          this.$emit('path_changed', this.$polygonObject.getPath());\n        };\n\n        eventListeners.push([mvcPath, mvcPath.addListener('insert_at', updatePaths)]);\n        eventListeners.push([mvcPath, mvcPath.addListener('remove_at', updatePaths)]);\n        eventListeners.push([mvcPath, mvcPath.addListener('set_at', updatePaths)]);\n\n        clearEvents = () => {\n          eventListeners.map(([obj, listenerHandle]) => // eslint-disable-line no-unused-vars\n            google.maps.event.removeListener(listenerHandle));\n        };\n      }\n    }, {\n      deep: this.deepWatch,\n      immediate: true,\n    });\n\n    // Display the map\n    this.$polygonObject.setMap(this.$map);\n  },\n};\n","import {clone} from 'lodash';\n\nimport eventBinder from '../utils/eventsBinder.js';\nimport propsBinder from '../utils/propsBinder.js';\nimport MapElementMixin from './mapElementMixin';\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\n\nconst props = {\n  center: {\n    type: Object,\n    twoWay: true,\n    required: true\n  },\n  radius: {\n    type: Number,\n    default: 1000,\n    twoWay: true\n  },\n  draggable: {\n    type: Boolean,\n    default: false,\n  },\n  editable: {\n    type: Boolean,\n    default: false,\n  },\n  options: {\n    type: Object,\n    twoWay: false\n  }\n};\n\nconst events = [\n  'click',\n  'dblclick',\n  'drag',\n  'dragend',\n  'dragstart',\n  'mousedown',\n  'mousemove',\n  'mouseout',\n  'mouseover',\n  'mouseup',\n  'rightclick'\n];\n\nexport default {\n  mixins: [MapElementMixin, getPropsValuesMixin],\n  props: props,\n  version: 2,\n\n  render() { return ''; },\n\n  deferredReady() {\n    const options = clone(this.getPropsValues());\n    options.map = this.$map;\n    delete options.bounds;\n    this.createCircle(options);\n  },\n\n  methods: {\n    createCircle (options) {\n      this.$circleObject = new google.maps.Circle(options);\n            // we cant bind bounds because there is no `setBounds` method\n            // on the Circle object\n      const boundProps = clone(props);\n      delete boundProps.bounds;\n      propsBinder(this, this.$circleObject, boundProps);\n      eventBinder(this, this.$circleObject, events);\n\n      const updateBounds = () => {\n        this.$emit('bounds_changed', this.$circleObject.getBounds());\n      };\n\n      this.$on('radius_changed', updateBounds);\n      this.$on('center_changed', updateBounds);\n    }\n  },\n\n  destroyed () {\n    if (this.$circleObject) {\n      this.$circleObject.setMap(null);\n    }\n  },\n};\n","import {clone} from 'lodash';\r\n\r\nimport eventBinder from '../utils/eventsBinder.js';\r\nimport propsBinder from '../utils/propsBinder.js';\r\nimport MapElementMixin from './mapElementMixin';\r\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\r\n\r\nconst props = {\r\n  bounds: {\r\n    type: Object,\r\n    twoWay: true\r\n  },\r\n  draggable: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  editable: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  options: {\r\n    type: Object,\r\n    twoWay: false\r\n  }\r\n};\r\n\r\nconst events = [\r\n  'click',\r\n  'dblclick',\r\n  'drag',\r\n  'dragend',\r\n  'dragstart',\r\n  'mousedown',\r\n  'mousemove',\r\n  'mouseout',\r\n  'mouseover',\r\n  'mouseup',\r\n  'rightclick'\r\n];\r\n\r\nexport default {\r\n  mixins: [MapElementMixin, getPropsValuesMixin],\r\n  props: props,\r\n\r\n  render() {\r\n    return '';\r\n  },\r\n\r\n  deferredReady() {\r\n    const options = clone(this.getPropsValues());\r\n    options.map = this.$map;\r\n    this.createRectangle(options);\r\n  },\r\n\r\n  methods: {\r\n    createRectangle(options) {\r\n      this.$rectangleObject = new google.maps.Rectangle(options);\r\n      propsBinder(this, this.$rectangleObject, props);\r\n      eventBinder(this, this.$rectangleObject, events);\r\n    },\r\n\r\n  },\r\n\r\n  destroyed() {\r\n    if (this.$rectangleObject) {\r\n      this.$rectangleObject.setMap(null);\r\n    }\r\n  },\r\n};\r\n","<template>\n  <div>\n    <div ref=\"flyaway\"> <!-- so named because it will fly away to another component -->\n      <slot>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {omit, clone} from 'lodash';\nimport propsBinder from '../utils/propsBinder.js';\nimport eventsBinder from '../utils/eventsBinder.js';\nimport MapElementMixin from './mapElementMixin';\n\nconst props = {\n  options: {\n    type: Object,\n    required: false,\n    default () {\n      return {};\n    }\n  },\n  opened: {\n    type: Boolean,\n    default: true,\n  },\n  position: {\n    type: Object,\n    twoWay: true,\n  },\n  zIndex: {\n    type: Number,\n    twoWay: true,\n  }\n};\n\nconst events = [\n  'domready',\n  'closeclick',\n  'content_changed',\n];\n\nexport default {\n  mixins: [MapElementMixin],\n  replace: false,\n  props: props,\n\n  mounted() {\n    const el = this.$refs.flyaway;\n    el.parentNode.removeChild(el);\n  },\n\n  deferredReady() {\n    this.$markerObject = null;\n    this.$markerComponent = this.$findAncestor(\n      (ans) => ans.$markerObject\n    );\n\n    if (this.$markerComponent) {\n      this.$markerObject = this.$markerComponent.$markerObject;\n    }\n    this.createInfoWindow();\n  },\n\n  destroyed () {\n    if (this.disconnect) {\n      this.disconnect();\n    }\n    if (this.$infoWindow) {\n      this.$infoWindow.setMap(null);\n    }\n  },\n\n  methods: {\n    openInfoWindow () {\n      if(this.opened) {\n        if (this.$markerObject !== null) {\n          this.$infoWindow.open(this.$map, this.$markerObject);\n        } else {\n          this.$infoWindow.open(this.$map);\n        }\n      } else {\n        this.$infoWindow.close();\n      }\n    },\n\n    createInfoWindow() {\n      // setting options\n      const options = clone(this.options);\n      options.content = this.$refs.flyaway;\n\n      // only set the position if the info window is not bound to a marker\n      if (this.$markerComponent === null) {\n        options.position = this.position;\n      }\n\n      this.$infoWindow = new google.maps.InfoWindow(options);\n\n      // Binding\n      propsBinder(this, this.$infoWindow, omit(props, ['opened']));\n      eventsBinder(this, this.$infoWindow, events);\n\n      this.openInfoWindow();\n      this.$watch('opened', () => {\n        this.openInfoWindow();\n      });\n    }\n  },\n};\n</script>\n","/*\nMixin for objects that are mounted by Google Maps\nJavascript API.\n\nThese are objects that are sensitive to element resize\noperations so it exposes a property which accepts a bus\n\n*/\n\nexport default {\n  props: ['resizeBus'],\n\n  data() {\n    return {\n      _actualResizeBus: null,\n    };\n  },\n\n  created() {\n    if (typeof this.resizeBus === 'undefined') {\n      this.$data._actualResizeBus = this.$gmapDefaultResizeBus;\n    } else {\n      this.$data._actualResizeBus = this.resizeBus;\n    }\n  },\n\n  methods: {\n    _resizeCallback() {\n      this.resize();\n    },\n    _delayedResizeCallback() {\n      this.$nextTick(() => this._resizeCallback());\n    }\n  },\n\n  watch: {\n    resizeBus(newVal, oldVal) { // eslint-disable-line no-unused-vars\n      this.$data._actualResizeBus = newVal;\n    },\n    '$data._actualResizeBus'(newVal, oldVal) {\n      if (oldVal) {\n        oldVal.$off('resize', this._delayedResizeCallback);\n      }\n      if (newVal) {\n        newVal.$on('resize', this._delayedResizeCallback);\n      }\n    }\n  },\n\n  destroyed() {\n    if (this.$data._actualResizeBus) {\n      this.$data._actualResizeBus.$off('resize', this._delayedResizeCallback);\n    }\n  }\n};\n","<template>\n  <div class=\"vue-map-container\">\n    <div ref=\"vue-map\" class=\"vue-map\"></div>\n    <div class=\"vue-map-hidden\">\n      <slot></slot>\n    </div>\n    <slot name=\"visible\"></slot>\n  </div>\n</template>\n\n<script>\nimport {omit, clone} from 'lodash';\n\nimport { loaded } from '../manager.js';\nimport { DeferredReadyMixin } from '../utils/deferredReady.js';\nimport eventsBinder from '../utils/eventsBinder.js';\nimport propsBinder from '../utils/propsBinder.js';\nimport getPropsMixin from '../utils/getPropsValuesMixin.js';\nimport mountableMixin from '../utils/mountableMixin.js';\n\nconst props = {\n  center: {\n    required: true,\n    twoWay: true,\n    type: Object\n  },\n  zoom: {\n    required: false,\n    twoWay: true,\n    type: Number\n  },\n  heading: {\n    type: Number,\n    twoWay: true,\n  },\n  mapTypeId: {\n    twoWay: true,\n    type: String\n  },\n  bounds: {\n    twoWay: true,\n    type: Object,\n  },\n  tilt: {\n    twoWay: true,\n    type: Number,\n  },\n  options: {\n    type: Object,\n    default() { return {}; }\n  }\n};\n\nconst events = [\n  'click',\n  'dblclick',\n  'drag',\n  'dragend',\n  'dragstart',\n  'idle',\n  'mousemove',\n  'mouseout',\n  'mouseover',\n  'resize',\n  'rightclick',\n  'tilesloaded',\n];\n\n// Plain Google Maps methods exposed here for convenience\nconst linkedMethods = [\n  'panBy',\n  'panTo',\n  'panToBounds',\n  'fitBounds'\n].reduce((all, methodName) => {\n  all[methodName] = function () {\n    if (this.$mapObject)\n      this.$mapObject[methodName].apply(this.$mapObject, arguments);\n  };\n  return all;\n}, {});\n\n// Other convenience methods exposed by Vue Google Maps\nconst customMethods = {\n  resize() {\n    if (this.$mapObject) {\n      google.maps.event.trigger(this.$mapObject, 'resize');\n    }\n  },\n  resizePreserveCenter() {\n    if (!this.$mapObject)\n      return;\n\n    const oldCenter = this.$mapObject.getCenter();\n    google.maps.event.trigger(this.$mapObject, 'resize');\n    this.$mapObject.setCenter(oldCenter);\n  },\n\n  /// Override mountableMixin::_resizeCallback\n  /// because resizePreserveCenter is usually the\n  /// expected behaviour\n  _resizeCallback() {\n    this.resizePreserveCenter();\n  }\n};\n\n// Methods is a combination of customMethods and linkedMethods\nconst methods = Object.assign({}, customMethods, linkedMethods);\n\nexport default {\n  mixins: [getPropsMixin, DeferredReadyMixin, mountableMixin],\n  props: props,\n  replace: false, // necessary for css styles\n\n  created() {\n    this.$mapCreated = new Promise((resolve, reject) => {\n      this.$mapCreatedDeferred = { resolve, reject };\n    });\n\n    const updateCenter = () => {\n      if (!this.$mapObject) return;\n\n      this.$mapObject.setCenter({\n        lat: this.finalLat,\n        lng: this.finalLng,\n      });\n    };\n    this.$watch('finalLat', updateCenter);\n    this.$watch('finalLng', updateCenter);\n  },\n\n  computed: {\n    finalLat () {\n      return this.center &&\n        (typeof this.center.lat === 'function') ? this.center.lat() : this.center.lat;\n    },\n    finalLng () {\n      return this.center &&\n        (typeof this.center.lng === 'function') ? this.center.lng() : this.center.lng;\n    },\n  },\n\n  watch: {\n    zoom(zoom) {\n      if (this.$mapObject) {\n        this.$mapObject.setZoom(zoom);\n      }\n    }\n  },\n\n  deferredReady() {\n    return loaded.then(() => {\n      // getting the DOM element where to create the map\n      const element = this.$refs['vue-map'];\n\n      // creating the map\n      const copiedData = clone(this.getPropsValues());\n      delete copiedData.options;\n      const options = clone(this.options);\n      Object.assign(options, copiedData);\n      this.$mapObject = new google.maps.Map(element, options);\n\n      // binding properties (two and one way)\n      propsBinder(this, this.$mapObject, omit(props, ['center', 'zoom', 'bounds']));\n\n      // manually trigger center and zoom\n      this.$mapObject.addListener('center_changed', () => {\n        if (this.$listeners && this.$listeners.center_changed) {\n          this.$emit('center_changed', this.$mapObject.getCenter());\n        }\n      });\n\n      this.$mapObject.addListener('zoom_changed', () => {\n        if (this.$listeners && this.$listeners.zoom_changed) {\n          this.$emit('zoom_changed', this.$mapObject.getZoom());\n        }\n      });\n\n      this.$mapObject.addListener('bounds_changed', () => {\n        if (this.$listeners && this.$listeners.bounds_changed) {\n          this.$emit('bounds_changed', this.$mapObject.getBounds());\n        }\n      });\n\n      //binding events\n      eventsBinder(this, this.$mapObject, events);\n\n      this.$mapCreatedDeferred.resolve(this.$mapObject);\n\n      return this.$mapCreated;\n    })\n    .catch((error) => {\n      throw error;\n    });\n  },\n  methods: methods\n};\n</script>\n","//This piece of code was orignally written by amirnissim and can be seen here\n//http://stackoverflow.com/a/11703018/2694653\n//This has been ported to Vanilla.js by GuillaumeLeclerc\nexport default (input) => {\n  var _addEventListener = (input.addEventListener) ? input.addEventListener : input.attachEvent;\n\n  function addEventListenerWrapper(type, listener) {\n    // Simulate a 'down arrow' keypress on hitting 'return' when no pac suggestion is selected,\n    // and then trigger the original listener.\n    if (type == 'keydown') {\n      var orig_listener = listener;\n      listener = function(event) {\n        var suggestion_selected = document.getElementsByClassName('pac-item-selected').length > 0;\n        if (event.which == 13 && !suggestion_selected) {\n          var simulatedEvent = document.createEvent('Event');\n          simulatedEvent.keyCode = 40;\n          simulatedEvent.which = 40;\n          orig_listener.apply(input, [simulatedEvent]);\n        }\n        orig_listener.apply(input, [event]);\n      };\n    }\n    _addEventListener.apply(input, [type, listener]);\n  }\n\n  input.addEventListener = addEventListenerWrapper;\n  input.attachEvent = addEventListenerWrapper;\n};\n","<template>\n    <label>\n        <span v-text=\"label\"></span>\n        <input type=\"text\" :placeholder=\"placeholder\" :class=\"className\"\n          ref=\"input\"/>\n    </label>\n</template>\n\n<script>\nimport {omit, clone} from 'lodash';\nimport propsBinder from '../utils/propsBinder.js';\nimport downArrowSimulator from '../utils/simulateArrowDown.js';\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js';\nimport {\n  loaded\n} from '../manager.js';\n\nconst props = {\n  bounds: {\n    type: Object,\n  },\n  defaultPlace: {\n    type: String,\n    default: '',\n  },\n  componentRestrictions: {\n    type: Object,\n    default: null,\n  },\n  types: {\n    type: Array,\n    default: function() {\n      return [];\n    }\n  },\n  placeholder: {\n    required: false,\n    type: String\n  },\n  className: {\n    required: false,\n    type: String\n  },\n  label: {\n    required: false,\n    type: String,\n    default: null\n  },\n  selectFirstOnEnter: {\n    require: false,\n    type: Boolean,\n    default: false\n  }\n};\n\nexport default {\n  mixins: [getPropsValuesMixin],\n\n  mounted() {\n    const input = this.$refs.input;\n\n    // Allow default place to be set\n    input.value = this.defaultPlace;\n    this.$watch('defaultPlace', () => {\n      input.value = this.defaultPlace;\n    });\n\n    loaded.then(() => {\n      const options = clone(this.getPropsValues());\n      if (this.selectFirstOnEnter) {\n        downArrowSimulator(this.$refs.input);\n      }\n\n      if(typeof(google.maps.places.Autocomplete) !== 'function'){\n        throw new Error('google.maps.places.Autocomplete is undefined. Did you add \\'places\\' to libraries when loading Google Maps?');\n      }\n\n      this.autoCompleter = new google.maps.places.Autocomplete(this.$refs.input, options);\n      propsBinder(this, this.autoCompleter, omit(props, ['placeholder', 'place', 'selectFirstOnEnter',\n        'defaultPlace', 'className', 'label']));\n\n      this.autoCompleter.addListener('place_changed', () => {\n        this.$emit('place_changed', this.autoCompleter.getPlace());\n      });\n    });\n  },\n  created() {\n    console.warn('The PlaceInput class is deprecated! Please consider using the Autocomplete input instead'); //eslint-disable-line no-console\n  },\n  props: props,\n};\n</script>\n","<template>\n  <input type=\"text\" :placeholder=\"placeholder\" ref=\"input\"\n    :value=\"value\"/>\n</template>\n<script>\nimport { clone, pickBy, omit } from 'lodash'\nimport propsBinder from '../utils/propsBinder.js'\nimport downArrowSimulator from '../utils/simulateArrowDown.js'\nimport getPropsValuesMixin from '../utils/getPropsValuesMixin.js'\nimport {\n  loaded\n} from '../manager.js'\n\nconst props = {\n  bounds: {\n    type: Object\n  },\n  componentRestrictions: {\n    type: Object\n  },\n  types: {\n    type: Array,\n    default: function () {\n      return []\n    }\n  },\n  placeholder: {\n    required: false,\n    type: String\n  },\n  selectFirstOnEnter: {\n    require: false,\n    type: Boolean,\n    default: false\n  },\n  value: {\n    type: String,\n    default: ''\n  },\n  options: {\n    type: Object\n  }\n}\n\nexport default {\n  mixins: [getPropsValuesMixin],\n\n  mounted () {\n    loaded.then(() => {\n      const options = clone(this.getPropsValues())\n      if (this.selectFirstOnEnter) {\n        downArrowSimulator(this.$refs.input)\n      }\n\n      if(typeof(google.maps.places.Autocomplete) !== 'function'){\n        throw new Error('google.maps.places.Autocomplete is undefined. Did you add \\'places\\' to libraries when loading Google Maps?')\n      }\n\n      /* eslint-disable no-unused-vars */\n      const finalOptions = pickBy(Object.assign(\n        {},\n        omit(options, ['options', 'selectFirstOnEnter', 'value', 'place', 'placeholder']),\n        options.options\n      ), (v, k) => v !== undefined)\n\n      // Component restrictions is rather particular. Undefined not allowed\n      this.$watch('componentRestrictions', v => {\n        if (v !== undefined) {\n          this.$autocomplete.setComponentRestrictions(v)\n        }\n      })\n\n      this.$autocomplete = new google.maps.places.Autocomplete(this.$refs.input, finalOptions)\n      propsBinder(this, this.$autocomplete, omit(props, ['placeholder', 'place', 'selectFirstOnEnter', 'value', 'componentRestrictions']))\n\n      this.$autocomplete.addListener('place_changed', () => {\n        this.$emit('place_changed', this.$autocomplete.getPlace())\n      })\n    })\n  },\n  props: props\n}\n</script>\n","import {load, loaded} from './manager.js';\nimport Marker from './components/marker';\nimport Polyline from './components/polyline';\nimport Polygon from './components/polygon';\nimport Circle from './components/circle';\nimport Rectangle from './components/rectangle';\n\n// Vue component imports\nimport InfoWindow from './components/infoWindow.vue';\nimport Map from './components/map.vue';\nimport PlaceInput from './components/placeInput.vue';\nimport Autocomplete from './components/autocomplete.vue';\n\nimport MapElementMixin from './components/mapElementMixin';\nimport MountableMixin from './utils/mountableMixin';\nimport {DeferredReady} from './utils/deferredReady';\n\n// export everything\nexport {load, loaded, Marker, Polyline, Polygon, Circle, Rectangle,\n  InfoWindow, Map, PlaceInput, MapElementMixin, Autocomplete,\n  MountableMixin};\n\nexport function install(Vue, options) {\n  options = Object.assign({}, {\n    installComponents: true,\n  }, options);\n\n  Vue.use(DeferredReady);\n\n  const defaultResizeBus = new Vue();\n  Vue.$gmapDefaultResizeBus = defaultResizeBus;\n  Vue.mixin({\n    created() {\n      this.$gmapDefaultResizeBus = defaultResizeBus;\n    }\n  });\n\n  if (options.load) {\n    load(options.load);\n  }\n\n  if (options.installComponents) {\n    Vue.component('GmapMap', Map);\n    Vue.component('GmapMarker', Marker);\n    Vue.component('GmapInfoWindow', InfoWindow);\n    Vue.component('GmapPolyline', Polyline);\n    Vue.component('GmapPolygon', Polygon);\n    Vue.component('GmapCircle', Circle);\n    Vue.component('GmapRectangle', Rectangle);\n    Vue.component('GmapAutocomplete', Autocomplete);\n    Vue.component('GmapPlaceInput', PlaceInput);\n  }\n}\n"],"names":["setUp","loaded","Promise","resolve","reject","window","load","apiKey","version","libraries","loadCn","document","googleMapScript","createElement","options","key","k","Error","librariesPath","length","join","Array","prototype","isPrototypeOf","baseUrl","url","Object","keys","map","encodeURIComponent","setAttribute","body","appendChild","vueElement","googleMapObject","events","eventName","exposedName","addListener","ev","$listeners","$emit","capitalizeFirstLetter","string","charAt","toUpperCase","slice","googleMapsElement","props","afterModelChanged","attribute","twoWay","type","trackProperties","setMethodName","getMethodName","toLowerCase","initialValue","$options","_componentTag","timesSet","$watch","attributeValue","tick","expectedTick","raiseExpectation","updateTick","Math","max","respondToChange","forEach","propName","$nextTick","v","DeferredReady","Vue","config","optionMergeStrategies","deferredReady","created","beforeDeferredReady","runHooks","vm","hooks","beforePromise","then","all","x","apply","err","error","stack","$deferredReadyPromiseResolve","DeferredReadyMixin","$deferredReadyPromise","search","$parent","$deferredReadyAncestor","$findAncestor","ans","$mapCreated","constructor","name","$mapPromise","$map","$mapObject","$MapElementMixin","condition","Number","Boolean","String","MapElementMixin","getPropsValuesMixin","h","$slots","default","$markerObject","$clusterObject","removeMarker","setMap","value","prop","assign","createMarker","google","maps","Marker","addMarker","$polylineObject","getPropsValues","Polyline","clearEvents","path","setPath","mvcPath","getPath","eventListeners","updatePaths","push","obj","listenerHandle","event","removeListener","deepWatch","$polygonObject","paths","Polygon","setPaths","getPaths","mvcArray","i","getLength","getAt","bounds","createCircle","$circleObject","Circle","boundProps","updateBounds","getBounds","$on","createRectangle","$rectangleObject","Rectangle","render","el","$refs","flyaway","parentNode","removeChild","$markerComponent","createInfoWindow","disconnect","$infoWindow","opened","open","close","content","position","InfoWindow","openInfoWindow","resizeBus","$data","_actualResizeBus","$gmapDefaultResizeBus","resize","_resizeCallback","newVal","oldVal","$off","_delayedResizeCallback","linkedMethods","reduce","methodName","arguments","customMethods","trigger","oldCenter","getCenter","setCenter","resizePreserveCenter","methods","getPropsMixin","mountableMixin","$mapCreatedDeferred","updateCenter","finalLat","finalLng","center","lat","lng","zoom","setZoom","element","copiedData","Map","center_changed","zoom_changed","getZoom","bounds_changed","catch","input","_addEventListener","addEventListener","attachEvent","addEventListenerWrapper","listener","orig_listener","suggestion_selected","getElementsByClassName","which","simulatedEvent","createEvent","keyCode","defaultPlace","selectFirstOnEnter","places","Autocomplete","autoCompleter","getPlace","warn","finalOptions","undefined","$autocomplete","setComponentRestrictions","install","use","defaultResizeBus","mixin","installComponents","component","PlaceInput"],"mappings":"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"}